{
  "entities": {
    "SensoryMap": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SensoryMap",
      "type": "object",
      "description": "Represents a sensory map created within the Sensory Mapper application.",
      "properties": {
        "mapImage": {
          "type": "string",
          "description": "Data URL of the base map image."
        },
        "imageDimensions": {
          "type": "object",
          "properties": {
            "width": { "type": "number" },
            "height": { "type": "number" }
          },
          "required": ["width", "height"]
        },
        "items": {
          "type": "array",
          "items": {
            "type": "object"
          },
          "description": "An array of sensory annotations (markers and shapes)."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the map was created."
        },
        "editCode": {
          "type": "string",
          "description": "A secret code that allows editing of the map."
        }
      },
      "required": [
        "mapImage",
        "imageDimensions",
        "items",
        "createdAt",
        "editCode"
      ]
    }
  },
  "auth": {
    "providers": [
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/sensoryMaps/{mapId}",
        "definition": {
          "entityName": "SensoryMap",
          "schema": {
            "$ref": "#/backend/entities/SensoryMap"
          },
          "description": "Stores shared sensory maps, which are publicly readable.",
          "params": [
            {
              "name": "mapId",
              "description": "The unique ID of the sensory map."
            }
          ]
        }
      }
    ],
    "reasoning": "The structure is simplified to a single top-level collection `sensoryMaps` to store the shared maps. This is a public collection where anyone can read the maps, but writing is restricted. This aligns with the 'share' functionality where a read-only version of the map is generated. The app does not have user authentication for editing, so a user-centric data structure is not needed at this time."
  }
}
